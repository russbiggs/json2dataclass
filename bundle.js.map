{"version":3,"file":"bundle.js","sources":["../src/pubsub.ts","../src/python-output.ts","../src/index.ts","../src/json-input.ts","../src/import-toggle.ts","../src/datetime-toggle.ts","../src/snake-case-toggle.ts","../src/modal.ts"],"sourcesContent":["interface Events {\n    [key: string]: Array<Function>;\n}\n\nclass PubSub {\n    events: Events;\n\n    constructor() {\n        this.events = {};\n    }\n    subscribe = (event: string, callback: Function) => {\n        if (!this.events.hasOwnProperty(event)) {\n            this.events[event] = [];\n        }\n        return this.events[event].push(callback);\n    };\n\n    publish = (event: string, data: Object = {}) => {\n        if (!this.events.hasOwnProperty(event)) {\n            return [];\n        }\n        return this.events[event].map(callback => callback(data));\n    };\n}\n\nexport default PubSub;\n","const importStrings = {\n    dataclass: `<span class=\"keyword\">from</span> <span class=\"class-name\">dataclasses</span> <span class=\"keyword\">import</span> <span class=\"class-name\">dataclass</span>`,\n    list: `<span class=\"keyword\">from</span> <span class=\"class-name\">typing</span> <span class=\"keyword\">import</span> <span class=\"class-name\">List</span>`,\n    union: `<span class=\"keyword\">from</span> <span class=\"class-name\">typing</span> <span class=\"keyword\">import</span> <span class=\"class-name\">Union</span>`,\n    datetime: `<span class=\"keyword\">import</span> <span class=\"class-name\">datetime</span>`,\n};\n\nclass PythonOutput {\n    elem: HTMLInputElement;\n    imports: string[];\n    data: string;\n    includeImports: boolean;\n    datetime: boolean;\n    snakeCase: boolean;\n\n    constructor() {\n        this.elem = document.querySelector('.js-python-output');\n        this.imports = [];\n        this.includeImports = false;\n        this.datetime = false;\n        this.snakeCase = true;\n        this.data = '';\n        this.addEventListeners();\n    }\n\n    addEventListeners = () => {\n        this.elem.addEventListener('keydown', this.onKeyDown);\n    };\n\n    onKeyDown = (e: KeyboardEvent) => {\n        if (!~[37, 38, 39, 40].indexOf(e.keyCode) && !e.ctrlKey && !e.metaKey) {\n            e.preventDefault();\n        }\n    };\n\n    setData = (data: string) => {\n        this.data = data;\n        this.update();\n    };\n\n    toggleIncludeImports = () => {\n        this.includeImports = !this.includeImports;\n        if (this.data != '') {\n            this.update();\n        }\n    };\n\n    toggleDatetime = () => {\n        this.datetime = !this.datetime;\n        if (this.data != '') {\n            this.update();\n        }\n    };\n\n    errorMessage = (message: string) => {\n        this.elem.innerHTML = message;\n    };\n\n    toggleCaseStyle = () => {\n        this.snakeCase = !this.snakeCase;\n        if (this.data != '') {\n            this.update();\n        }\n    };\n\n    update = () => {\n        if (this.data != '') {\n            this.elem.innerHTML = '';\n            const objs = {};\n            const data = JSON.parse(this.data);\n\n            this.findObjs(data, objs);\n            let output = '';\n\n            if (this.includeImports) {\n                if (this.datetime) {\n                    output += importStrings.datetime;\n                    output += '<br>';\n                }\n                if (this.imports.length > 0) {\n                    for (const i of this.imports) {\n                        output += importStrings[i];\n                        output += '<br>';\n                    }\n                }\n                output += importStrings.dataclass;\n                output += '<br><br>';\n            }\n            for (const [name, obj] of Object.entries(objs)) {\n                output += this.createClass(name, obj);\n                output += '<br><br>';\n            }\n            this.elem.innerHTML = output;\n        } else {\n            this.elem.innerHTML = '';\n        }\n    };\n\n    findObjs = (data: object, agg: object, parent: string = 'GeneratedClass'): void => {\n        let obj = {};\n        if (agg.hasOwnProperty(parent)) {\n            obj = agg[parent]\n        }\n        for (const key in data) {\n            if (data[key] !== null && data[key] instanceof Array) {\n                if (this.imports.indexOf('list') == -1) {\n                    this.imports.push('list');\n                }\n                let listTypes = new Set();\n                for (const item of data[key]) {\n                    if (\n                        typeof item === 'boolean' ||\n                        typeof item === 'number' ||\n                        typeof item === 'string' ||\n                        item instanceof String\n                    ) {\n                        listTypes.add(findType(item, this.datetime));\n                    } else {\n                        const className = properCase(key);\n                        listTypes.add(`${className}`);\n                        for (const item of data[key]) {\n                            this.findObjs(item, agg, key);\n                        }\n                    }\n                }\n                if (listTypes.size < 1) {\n                    obj[key] = `List`;\n                } else if (listTypes.size > 1) {\n                    if (this.imports.indexOf('union') == -1) {\n                        this.imports.push('union');\n                    }\n                    let typeArr = Array.from(listTypes.values());\n                    obj[key] = `List[Union[${typeArr.join(', ')}]]`;\n                } else {\n                    obj[key] = `List[${listTypes.values().next().value}]`;\n                }\n            } else if (data[key] !== null && typeof data[key] == 'object') {\n                obj[key] = properCase(key);\n                this.findObjs(data[key], agg, key);\n            } else {\n                obj[key] = findType(data[key], this.datetime);\n            }\n        }\n\n        agg[parent] = obj\n    };\n\n    createClass = (name: string, data: any): string => {\n        let types = '';\n        for (const [key, value] of Object.entries(data)) {\n            let keyName = key;\n            if (this.snakeCase) {\n                keyName = key\n                    .split(/(?=[A-Z])/)\n                    .join('_')\n                    .toLowerCase();\n            }\n            const line = `&nbsp&nbsp&nbsp&nbsp${keyName}: <span class=\"type\">${value}</span>`;\n            types += line;\n            types += '<br>';\n        }\n        let classText = '<span class=\"dataclass\">@dataclass</span><br>';\n        let titleName = name;\n        if (name[0] != name[0].toUpperCase()) {\n            titleName = properCase(name);\n        }\n        classText += `<span class=\"keyword\">class</span> <span class=\"class-name\">${titleName}</span>:`;\n        classText += '<br>';\n        classText += types;\n        return classText;\n    };\n}\n\nconst properCase = (word: string): string => {\n    return (\n        word.charAt(0).toUpperCase() +\n        word.substr(1).replace(/([-_][a-z])/g, (group) => group.toUpperCase().replace('-', '').replace('_', ''))\n    );\n};\n\nconst findType = (data: boolean | number | String, datetime: boolean): string => {\n    if (typeof data === 'string' || data instanceof String) {\n        const regex = RegExp(/^\\d{4}(-\\d\\d(-\\d\\d(T\\d\\d:\\d\\d(:\\d\\d)?(\\.\\d+)?(([+-]\\d\\d:\\d\\d)|Z)?)?)?)?$/i);\n        const match = data.match(regex);\n        if (datetime && match) {\n            return 'datetime.datetime';\n        }\n        return 'str';\n    }\n    if (typeof data === 'number' && isFinite(data)) {\n        if (data % 1 === 0) {\n            return 'int';\n        } else {\n            return 'float';\n        }\n    }\n    if (typeof data == 'boolean') {\n        return 'bool';\n    }\n    return 'str';\n};\n\nexport default PythonOutput;\n","import PubSub from './pubsub';\nimport PythonOutput from './python-output';\nimport JSONInput from './json-input';\nimport ImportToggle from './import-toggle';\nimport DatetimeToggle from './datetime-toggle';\nimport SnakeCaseToggle from './snake-case-toggle';\nimport Modal from './modal';\n\nconst pubSub = new PubSub();\nconst pythonOutput = new PythonOutput();\nnew JSONInput(pubSub);\nnew ImportToggle(pubSub);\nnew DatetimeToggle(pubSub);\nnew SnakeCaseToggle(pubSub);\nnew Modal();\n\npubSub.subscribe('enter-json', pythonOutput.setData);\npubSub.subscribe('toggle-import', pythonOutput.toggleIncludeImports);\npubSub.subscribe('toggle-datetime', pythonOutput.toggleDatetime);\npubSub.subscribe('toggle-snake-case', pythonOutput.toggleCaseStyle);\npubSub.subscribe('json-error', pythonOutput.errorMessage);\n","import PubSub from './pubsub';\n\nclass JSONInput {\n    pubSub: PubSub;\n    elem: HTMLInputElement;\n\n    constructor(pubSub: PubSub) {\n        this.pubSub = pubSub;\n        this.elem = document.querySelector('.js-json-input');\n        this.addEventListeners();\n    }\n\n    addEventListeners = () => {\n        this.elem.addEventListener('input', this.onInput);\n    };\n\n    onInput = () => {\n        try {\n            JSON.parse(this.elem.value);\n            this.pubSub.publish('enter-json', this.elem.value);\n        } catch (e) {\n            this.pubSub.publish('json-error', `<span class=\"error-message\">${e.message}:<br>${this.elem.value}<span>`);\n        }\n    };\n}\n\nexport default JSONInput;\n","import PubSub from './pubsub';\n\nclass ImportToggle {\n    elem: HTMLInputElement;\n    pubSub: PubSub;\n\n    constructor(pubSub: PubSub) {\n        this.elem = document.getElementById('import-toggle') as HTMLInputElement;\n        this.pubSub = pubSub;\n        this.addEventListeners();\n    }\n\n    addEventListeners = () => {\n        this.elem.addEventListener('change', this.onChange);\n    };\n\n    onChange = () => {\n        this.pubSub.publish('toggle-import');\n    };\n}\n\nexport default ImportToggle;\n","import PubSub from './pubsub';\n\nclass DatetimeToggle {\n    elem: HTMLInputElement;\n    pubSub: PubSub;\n\n    constructor(pubSub: PubSub) {\n        this.elem = document.getElementById('datetime-toggle') as HTMLInputElement;\n        this.pubSub = pubSub;\n        this.addEventListeners();\n    }\n\n    addEventListeners = () => {\n        this.elem.addEventListener('change', this.onChange);\n    };\n\n    onChange = () => {\n        this.pubSub.publish('toggle-datetime');\n    };\n}\n\nexport default DatetimeToggle;\n","import PubSub from './pubsub';\n\nclass SnakeCaseToggle {\n    elem: HTMLInputElement;\n    pubSub: PubSub;\n\n    constructor(pubSub: PubSub) {\n        this.elem = document.getElementById('snake-case-toggle') as HTMLInputElement;\n        this.pubSub = pubSub;\n        this.addEventListeners();\n    }\n\n    addEventListeners = () => {\n        this.elem.addEventListener('change', this.onChange);\n    };\n\n    onChange = () => {\n        this.pubSub.publish('toggle-snake-case');\n    };\n}\n\nexport default SnakeCaseToggle;\n","class Modal {\n    modal: HTMLElement;\n    modalBody: HTMLElement;\n    background: HTMLElement;\n    modalBtn: HTMLElement;\n    closeBtn: HTMLButtonElement;\n\n    constructor() {\n        this.modal = document.querySelector('.js-modal');\n        this.modalBody = document.querySelector('.js-modal__body');\n        this.background = document.querySelector('.js-modal__background');\n        this.modalBtn = document.querySelector('.about');\n        this.closeBtn = document.querySelector('.js-close-btn');\n        this.addEventListeners();\n    }\n\n    addEventListeners = () => {\n        this.modalBtn.addEventListener('click', this.show);\n        this.background.addEventListener('click', this.close);\n        this.closeBtn.addEventListener('click', this.close);\n    };\n\n    show = () => {\n        this.modal.classList.add('modal--visible');\n        this.background.classList.add('modal__background--visible');\n        this.modalBody.classList.add('modal__body--visible');\n    };\n\n    close = () => {\n        this.modal.classList.remove('modal--visible');\n        this.background.classList.remove('modal__background--visible');\n        this.modalBody.classList.remove('modal__body--visible');\n    };\n}\n\nexport default Modal;\n"],"names":["importStrings","dataclass","list","union","datetime","properCase","word","charAt","toUpperCase","substr","replace","group","findType","data","String","regex","RegExp","match","isFinite","pubSub","constructor","event","callback","this","events","hasOwnProperty","push","map","pythonOutput","elem","addEventListener","onKeyDown","e","indexOf","keyCode","ctrlKey","metaKey","preventDefault","update","includeImports","message","innerHTML","snakeCase","objs","JSON","parse","findObjs","output","imports","length","Object","entries","const","createClass","agg","parent","obj","key","Array","listTypes","Set","item","add","className","size","typeArr","from","values","join","next","name","types","keyName","split","toLowerCase","value","classText","titleName","document","querySelector","addEventListeners","onInput","publish","onChange","getElementById","modalBtn","show","background","close","closeBtn","modal","classList","modalBody","remove","subscribe","setData","toggleIncludeImports","toggleDatetime","toggleCaseStyle","errorMessage"],"mappings":"AAIA,ICJMA,EAAgB,CAClBC,wKACAC,yJACAC,2JACAC,yFAyKEC,WAAcC,UAEZA,EAAKC,OAAO,GAAGC,cACfF,EAAKG,OAAO,GAAGC,QAAQ,wBAAiBC,UAAUA,EAAMH,cAAcE,QAAQ,IAAK,IAAIA,QAAQ,IAAK,OAItGE,WAAYC,EAAiCT,MAC3B,iBAATS,GAAqBA,aAAgBC,OAAQ,KAC9CC,EAAQC,OAAO,6EACfC,EAAQJ,EAAKI,MAAMF,UACrBX,GAAYa,EACL,oBAEJ,YAES,iBAATJ,GAAqBK,SAASL,GACjCA,EAAO,GAAM,EACN,MAEA,QAGI,kBAARA,EACA,OAEJ,OC/LLM,EAAS,IFDXC,8CAGaC,EAAeC,UACnBC,EAAKC,OAAOC,eAAeJ,OACvBG,OAAOH,GAAS,IAElBE,EAAKC,OAAOH,GAAOK,KAAKJ,0BAGxBD,EAAeR,yBAAe,IAChCU,EAAKC,OAAOC,eAAeJ,GAGzBE,EAAKC,OAAOH,GAAOM,aAAIL,UAAYA,EAAST,KAFxC,SAXNW,OAAS,IEChBI,EAAe,IDMjBR,0DAWSS,KAAKC,iBAAiB,UAAWP,EAAKQ,oCAGlCC,IACH,CAAC,GAAI,GAAI,GAAI,IAAIC,QAAQD,EAAEE,UAAaF,EAAEG,SAAYH,EAAEI,SAC1DJ,EAAEK,wCAICxB,KACFA,KAAOA,IACPyB,iDAIAC,gBAAkBhB,EAAKgB,eACX,IAAbhB,EAAKV,QACAyB,2CAKJlC,UAAYmB,EAAKnB,SACL,IAAbmB,EAAKV,QACAyB,qCAIGE,KACPX,KAAKY,UAAYD,qCAIjBE,WAAanB,EAAKmB,UACN,IAAbnB,EAAKV,QACAyB,oCAKQ,IAAbf,EAAKV,KAAY,GACZgB,KAAKY,UAAY,OAChBE,EAAO,GACP9B,EAAO+B,KAAKC,MAAMtB,EAAKV,QAExBiC,SAASjC,EAAM8B,OAChBI,EAAS,MAETxB,EAAKgB,eAAgB,IACjBhB,EAAKnB,WACL2C,GAAU/C,EAAcI,SACxB2C,GAAU,QAEVxB,EAAKyB,QAAQC,OAAS,gBACN1B,EAAKyB,wBACjBD,GAAU/C,QACV+C,GAAU,OAGlBA,GAAU/C,EAAcC,UACxB8C,GAAU,yBAEYG,OAAOC,QAAQR,mBAAO,CAA3CS,WACDL,GAAUxB,EAAK8B,uBACfN,GAAU,aAETlB,KAAKY,UAAYM,SAEjBlB,KAAKY,UAAY,2BAIlB5B,EAAcyC,EAAaC,kBAAiB,sBAChDC,EAAM,OAILJ,IAAMK,KAHPH,EAAI7B,eAAe8B,KACnBC,EAAMF,EAAIC,IAEI1C,KACI,OAAdA,EAAK4C,IAAiB5C,EAAK4C,aAAgBC,MAAO,EACb,GAAjCnC,EAAKyB,QAAQf,QAAQ,WAChBe,QAAQtB,KAAK,gBAElBiC,EAAY,IAAIC,UACD/C,EAAK4C,mBAAM,CAAzBL,IAAMS,UAEa,kBAATA,GACS,iBAATA,GACS,iBAATA,GACPA,aAAgB/C,OAEhB6C,EAAUG,IAAIlD,EAASiD,EAAMtC,EAAKnB,eAC/B,KACG2D,EAAY1D,EAAWoD,GAC7BE,EAAUG,OAAOC,iBACElD,EAAK4C,qBACfX,cAAeQ,EAAKG,OAIjCE,EAAUK,KAAO,EACjBR,EAAIC,eACD,GAAIE,EAAUK,KAAO,EAAG,EACW,GAAlCzC,EAAKyB,QAAQf,QAAQ,YAChBe,QAAQtB,KAAK,aAElBuC,EAAUP,MAAMQ,KAAKP,EAAUQ,UACnCX,EAAIC,iBAAqBQ,EAAQG,KAAK,gBAEtCZ,EAAIC,WAAeE,EAAUQ,SAASE,sBAErB,OAAdxD,EAAK4C,IAAqC,iBAAb5C,EAAK4C,IACzCD,EAAIC,GAAOpD,EAAWoD,KACjBX,SAASjC,EAAK4C,GAAMH,EAAKG,IAE9BD,EAAIC,GAAO7C,EAASC,EAAK4C,GAAMlC,EAAKnB,UAI5CkD,EAAIC,GAAUC,6BAGHc,EAAczD,WACrB0D,EAAQ,SACerB,OAAOC,QAAQtC,mBAAO,CAA5CuC,yBACGoB,EAAUf,EACVlC,EAAKmB,YACL8B,EAAUf,EACLgB,MAAM,aACNL,KAAK,KACLM,eAGTH,0BADoCC,0BAA+BG,YAEnEJ,GAAS,WAETK,EAAY,gDACZC,EAAYP,SACZA,EAAK,IAAMA,EAAK,GAAG9D,gBACnBqE,EAAYxE,EAAWiE,IAE3BM,kEAA4EC,cAC5ED,GAAa,QACAL,QAxJR1C,KAAOiD,SAASC,cAAc,0BAC9B/B,QAAU,QACVT,gBAAiB,OACjBnC,UAAW,OACXsC,WAAY,OACZ7B,KAAO,QACPmE,qBCZb,ICJI5D,SAAYD,kDAOHU,KAAKC,iBAAiB,QAASP,EAAK0D,sCAKrCrC,KAAKC,MAAMtB,EAAKM,KAAK8C,SAChBxD,OAAO+D,QAAQ,aAAc3D,EAAKM,KAAK8C,OAC9C,MAAO3C,KACAb,OAAO+D,QAAQ,4CAA6ClD,kBAAiBT,EAAKM,4BAdtFV,OAASA,OACTU,KAAOiD,SAASC,cAAc,uBAC9BC,oBDCb,CAAc7D,GACd,IELIC,SAAYD,kDAOHU,KAAKC,iBAAiB,SAAUP,EAAK4D,sCAIrChE,OAAO+D,QAAQ,uBAVfrD,KAAOiD,SAASM,eAAe,sBAC/BjE,OAASA,OACT6D,oBFEb,CAAiB7D,GACjB,IGNIC,SAAYD,kDAOHU,KAAKC,iBAAiB,SAAUP,EAAK4D,sCAIrChE,OAAO+D,QAAQ,yBAVfrD,KAAOiD,SAASM,eAAe,wBAC/BjE,OAASA,OACT6D,oBHGb,CAAmB7D,GACnB,IIPIC,SAAYD,kDAOHU,KAAKC,iBAAiB,SAAUP,EAAK4D,sCAIrChE,OAAO+D,QAAQ,2BAVfrD,KAAOiD,SAASM,eAAe,0BAC/BjE,OAASA,OACT6D,oBJIb,CAAoB7D,GACpB,IKPIC,0DAUSiE,SAASvD,iBAAiB,QAASP,EAAK+D,QACxCC,WAAWzD,iBAAiB,QAASP,EAAKiE,SAC1CC,SAAS3D,iBAAiB,QAASP,EAAKiE,+BAIxCE,MAAMC,UAAU7B,IAAI,oBACpByB,WAAWI,UAAU7B,IAAI,gCACzB8B,UAAUD,UAAU7B,IAAI,iDAIxB4B,MAAMC,UAAUE,OAAO,oBACvBN,WAAWI,UAAUE,OAAO,gCAC5BD,UAAUD,UAAUE,OAAO,8BAvB3BH,MAAQZ,SAASC,cAAc,kBAC/Ba,UAAYd,SAASC,cAAc,wBACnCQ,WAAaT,SAASC,cAAc,8BACpCM,SAAWP,SAASC,cAAc,eAClCU,SAAWX,SAASC,cAAc,sBAClCC,qBLGb7D,EAAO2E,UAAU,aAAclE,EAAamE,SAC5C5E,EAAO2E,UAAU,gBAAiBlE,EAAaoE,sBAC/C7E,EAAO2E,UAAU,kBAAmBlE,EAAaqE,gBACjD9E,EAAO2E,UAAU,oBAAqBlE,EAAasE,iBACnD/E,EAAO2E,UAAU,aAAclE,EAAauE"}